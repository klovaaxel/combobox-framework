var pt=Object.defineProperty;var mt=(s,t,e)=>t in s?pt(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var A=(s,t,e)=>(mt(s,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=e(i);fetch(i.href,n)}})();function w(s){return Array.isArray?Array.isArray(s):ot(s)==="[object Array]"}const bt=1/0;function _t(s){if(typeof s=="string")return s;let t=s+"";return t=="0"&&1/s==-bt?"-0":t}function Et(s){return s==null?"":_t(s)}function I(s){return typeof s=="string"}function nt(s){return typeof s=="number"}function At(s){return s===!0||s===!1||Lt(s)&&ot(s)=="[object Boolean]"}function ct(s){return typeof s=="object"}function Lt(s){return ct(s)&&s!==null}function b(s){return s!=null}function U(s){return!s.trim().length}function ot(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(s)}const Mt="Incorrect 'index' type",xt=s=>`Invalid value for key ${s}`,It=s=>`Pattern length exceeds max of ${s}.`,yt=s=>`Missing ${s} property in key`,wt=s=>`Property 'weight' in key '${s}' must be a positive integer`,q=Object.prototype.hasOwnProperty;class vt{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach(r=>{let i=at(r);this._keys.push(i),this._keyMap[i.id]=i,e+=i.weight}),this._keys.forEach(r=>{r.weight/=e})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function at(s){let t=null,e=null,r=null,i=1,n=null;if(I(s)||w(s))r=s,t=tt(s),e=V(s);else{if(!q.call(s,"name"))throw new Error(yt("name"));const c=s.name;if(r=c,q.call(s,"weight")&&(i=s.weight,i<=0))throw new Error(wt(c));t=tt(c),e=V(c),n=s.getFn}return{path:t,id:e,weight:i,src:r,getFn:n}}function tt(s){return w(s)?s:s.split(".")}function V(s){return w(s)?s.join("."):s}function St(s,t){let e=[],r=!1;const i=(n,c,a)=>{if(b(n))if(!c[a])e.push(n);else{let l=c[a];const h=n[l];if(!b(h))return;if(a===c.length-1&&(I(h)||nt(h)||At(h)))e.push(Et(h));else if(w(h)){r=!0;for(let o=0,u=h.length;o<u;o+=1)i(h[o],c,a+1)}else c.length&&i(h,c,a+1)}};return i(s,I(t)?t.split("."):t,0),r?e:e[0]}const kt={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Nt={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(s,t)=>s.score===t.score?s.idx<t.idx?-1:1:s.score<t.score?-1:1},Ct={location:0,threshold:.6,distance:100},Ot={useExtendedSearch:!1,getFn:St,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var f={...Nt,...kt,...Ct,...Ot};const Rt=/[^ ]+/g;function Tt(s=1,t=3){const e=new Map,r=Math.pow(10,t);return{get(i){const n=i.match(Rt).length;if(e.has(n))return e.get(n);const c=1/Math.pow(n,.5*s),a=parseFloat(Math.round(c*r)/r);return e.set(n,a),a},clear(){e.clear()}}}class X{constructor({getFn:t=f.getFn,fieldNormWeight:e=f.fieldNormWeight}={}){this.norm=Tt(e,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((e,r)=>{this._keysMap[e.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,I(this.docs[0])?this.docs.forEach((t,e)=>{this._addString(t,e)}):this.docs.forEach((t,e)=>{this._addObject(t,e)}),this.norm.clear())}add(t){const e=this.size();I(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,r=this.size();e<r;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!b(t)||U(t))return;let r={v:t,i:e,n:this.norm.get(t)};this.records.push(r)}_addObject(t,e){let r={i:e,$:{}};this.keys.forEach((i,n)=>{let c=i.getFn?i.getFn(t):this.getFn(t,i.path);if(b(c)){if(w(c)){let a=[];const l=[{nestedArrIndex:-1,value:c}];for(;l.length;){const{nestedArrIndex:h,value:o}=l.pop();if(b(o))if(I(o)&&!U(o)){let u={v:o,i:h,n:this.norm.get(o)};a.push(u)}else w(o)&&o.forEach((u,d)=>{l.push({nestedArrIndex:d,value:u})})}r.$[n]=a}else if(I(c)&&!U(c)){let a={v:c,n:this.norm.get(c)};r.$[n]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function lt(s,t,{getFn:e=f.getFn,fieldNormWeight:r=f.fieldNormWeight}={}){const i=new X({getFn:e,fieldNormWeight:r});return i.setKeys(s.map(at)),i.setSources(t),i.create(),i}function $t(s,{getFn:t=f.getFn,fieldNormWeight:e=f.fieldNormWeight}={}){const{keys:r,records:i}=s,n=new X({getFn:t,fieldNormWeight:e});return n.setKeys(r),n.setIndexRecords(i),n}function D(s,{errors:t=0,currentLocation:e=0,expectedLocation:r=0,distance:i=f.distance,ignoreLocation:n=f.ignoreLocation}={}){const c=t/s.length;if(n)return c;const a=Math.abs(r-e);return i?c+a/i:a?1:c}function Pt(s=[],t=f.minMatchCharLength){let e=[],r=-1,i=-1,n=0;for(let c=s.length;n<c;n+=1){let a=s[n];a&&r===-1?r=n:!a&&r!==-1&&(i=n-1,i-r+1>=t&&e.push([r,i]),r=-1)}return s[n-1]&&n-r>=t&&e.push([r,n-1]),e}const O=32;function Ft(s,t,e,{location:r=f.location,distance:i=f.distance,threshold:n=f.threshold,findAllMatches:c=f.findAllMatches,minMatchCharLength:a=f.minMatchCharLength,includeMatches:l=f.includeMatches,ignoreLocation:h=f.ignoreLocation}={}){if(t.length>O)throw new Error(It(O));const o=t.length,u=s.length,d=Math.max(0,Math.min(r,u));let g=n,p=d;const _=a>1||l,N=_?Array(u):[];let y;for(;(y=s.indexOf(t,p))>-1;){let E=D(t,{currentLocation:y,expectedLocation:d,distance:i,ignoreLocation:h});if(g=Math.min(E,g),p=y+o,_){let v=0;for(;v<o;)N[y+v]=1,v+=1}}p=-1;let T=[],C=1,P=o+u;const gt=1<<o-1;for(let E=0;E<o;E+=1){let v=0,S=P;for(;v<S;)D(t,{errors:E,currentLocation:d+S,expectedLocation:d,distance:i,ignoreLocation:h})<=g?v=S:P=S,S=Math.floor((P-v)/2+v);P=S;let Q=Math.max(1,d-S+1),H=c?u:Math.min(d+S,u)+o,$=Array(H+2);$[H+1]=(1<<E)-1;for(let L=H;L>=Q;L-=1){let F=L-1,Z=e[s.charAt(F)];if(_&&(N[F]=+!!Z),$[L]=($[L+1]<<1|1)&Z,E&&($[L]|=(T[L+1]|T[L])<<1|1|T[L+1]),$[L]&gt&&(C=D(t,{errors:E,currentLocation:F,expectedLocation:d,distance:i,ignoreLocation:h}),C<=g)){if(g=C,p=F,p<=d)break;Q=Math.max(1,2*d-p)}}if(D(t,{errors:E+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:h})>g)break;T=$}const B={isMatch:p>=0,score:Math.max(.001,C)};if(_){const E=Pt(N,a);E.length?l&&(B.indices=E):B.isMatch=!1}return B}function Dt(s){let t={};for(let e=0,r=s.length;e<r;e+=1){const i=s.charAt(e);t[i]=(t[i]||0)|1<<r-e-1}return t}class ht{constructor(t,{location:e=f.location,threshold:r=f.threshold,distance:i=f.distance,includeMatches:n=f.includeMatches,findAllMatches:c=f.findAllMatches,minMatchCharLength:a=f.minMatchCharLength,isCaseSensitive:l=f.isCaseSensitive,ignoreLocation:h=f.ignoreLocation}={}){if(this.options={location:e,threshold:r,distance:i,includeMatches:n,findAllMatches:c,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:h},this.pattern=l?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const o=(d,g)=>{this.chunks.push({pattern:d,alphabet:Dt(d),startIndex:g})},u=this.pattern.length;if(u>O){let d=0;const g=u%O,p=u-g;for(;d<p;)o(this.pattern.substr(d,O),d),d+=O;if(g){const _=u-O;o(this.pattern.substr(_),_)}}else o(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,includeMatches:r}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let p={isMatch:!0,score:0};return r&&(p.indices=[[0,t.length-1]]),p}const{location:i,distance:n,threshold:c,findAllMatches:a,minMatchCharLength:l,ignoreLocation:h}=this.options;let o=[],u=0,d=!1;this.chunks.forEach(({pattern:p,alphabet:_,startIndex:N})=>{const{isMatch:y,score:T,indices:C}=Ft(t,p,_,{location:i+N,distance:n,threshold:c,findAllMatches:a,minMatchCharLength:l,includeMatches:r,ignoreLocation:h});y&&(d=!0),u+=T,y&&C&&(o=[...o,...C])});let g={isMatch:d,score:d?u/this.chunks.length:1};return d&&r&&(g.indices=o),g}}class k{constructor(t){this.pattern=t}static isMultiMatch(t){return et(t,this.multiRegex)}static isSingleMatch(t){return et(t,this.singleRegex)}search(){}}function et(s,t){const e=s.match(t);return e?e[1]:null}class jt extends k{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}}class Bt extends k{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class Ht extends k{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}}class Ut extends k{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}}class Wt extends k{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class Vt extends k{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}}class ut extends k{constructor(t,{location:e=f.location,threshold:r=f.threshold,distance:i=f.distance,includeMatches:n=f.includeMatches,findAllMatches:c=f.findAllMatches,minMatchCharLength:a=f.minMatchCharLength,isCaseSensitive:l=f.isCaseSensitive,ignoreLocation:h=f.ignoreLocation}={}){super(t),this._bitapSearch=new ht(t,{location:e,threshold:r,distance:i,includeMatches:n,findAllMatches:c,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class ft extends k{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e=0,r;const i=[],n=this.pattern.length;for(;(r=t.indexOf(this.pattern,e))>-1;)e=r+n,i.push([r,e-1]);const c=!!i.length;return{isMatch:c,score:c?0:1,indices:i}}}const z=[jt,ft,Ht,Ut,Vt,Wt,Bt,ut],st=z.length,zt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Kt="|";function Gt(s,t={}){return s.split(Kt).map(e=>{let r=e.trim().split(zt).filter(n=>n&&!!n.trim()),i=[];for(let n=0,c=r.length;n<c;n+=1){const a=r[n];let l=!1,h=-1;for(;!l&&++h<st;){const o=z[h];let u=o.isMultiMatch(a);u&&(i.push(new o(u,t)),l=!0)}if(!l)for(h=-1;++h<st;){const o=z[h];let u=o.isSingleMatch(a);if(u){i.push(new o(u,t));break}}}return i})}const Yt=new Set([ut.type,ft.type]);class Jt{constructor(t,{isCaseSensitive:e=f.isCaseSensitive,includeMatches:r=f.includeMatches,minMatchCharLength:i=f.minMatchCharLength,ignoreLocation:n=f.ignoreLocation,findAllMatches:c=f.findAllMatches,location:a=f.location,threshold:l=f.threshold,distance:h=f.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:r,minMatchCharLength:i,findAllMatches:c,ignoreLocation:n,location:a,threshold:l,distance:h},this.pattern=e?t:t.toLowerCase(),this.query=Gt(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;t=i?t:t.toLowerCase();let n=0,c=[],a=0;for(let l=0,h=e.length;l<h;l+=1){const o=e[l];c.length=0,n=0;for(let u=0,d=o.length;u<d;u+=1){const g=o[u],{isMatch:p,indices:_,score:N}=g.search(t);if(p){if(n+=1,a+=N,r){const y=g.constructor.type;Yt.has(y)?c=[...c,..._]:c.push(_)}}else{a=0,n=0,c.length=0;break}}if(n){let u={isMatch:!0,score:a/n};return r&&(u.indices=c),u}}return{isMatch:!1,score:1}}}const K=[];function Xt(...s){K.push(...s)}function G(s,t){for(let e=0,r=K.length;e<r;e+=1){let i=K[e];if(i.condition(s,t))return new i(s,t)}return new ht(s,t)}const j={AND:"$and",OR:"$or"},Y={PATH:"$path",PATTERN:"$val"},J=s=>!!(s[j.AND]||s[j.OR]),Qt=s=>!!s[Y.PATH],Zt=s=>!w(s)&&ct(s)&&!J(s),it=s=>({[j.AND]:Object.keys(s).map(t=>({[t]:s[t]}))});function dt(s,t,{auto:e=!0}={}){const r=i=>{let n=Object.keys(i);const c=Qt(i);if(!c&&n.length>1&&!J(i))return r(it(i));if(Zt(i)){const l=c?i[Y.PATH]:n[0],h=c?i[Y.PATTERN]:i[l];if(!I(h))throw new Error(xt(l));const o={keyId:V(l),pattern:h};return e&&(o.searcher=G(h,t)),o}let a={children:[],operator:n[0]};return n.forEach(l=>{const h=i[l];w(h)&&h.forEach(o=>{a.children.push(r(o))})}),a};return J(s)||(s=it(s)),r(s)}function qt(s,{ignoreFieldNorm:t=f.ignoreFieldNorm}){s.forEach(e=>{let r=1;e.matches.forEach(({key:i,norm:n,score:c})=>{const a=i?i.weight:null;r*=Math.pow(c===0&&a?Number.EPSILON:c,(a||1)*(t?1:n))}),e.score=r})}function te(s,t){const e=s.matches;t.matches=[],b(e)&&e.forEach(r=>{if(!b(r.indices)||!r.indices.length)return;const{indices:i,value:n}=r;let c={indices:i,value:n};r.key&&(c.key=r.key.src),r.idx>-1&&(c.refIndex=r.idx),t.matches.push(c)})}function ee(s,t){t.score=s.score}function se(s,t,{includeMatches:e=f.includeMatches,includeScore:r=f.includeScore}={}){const i=[];return e&&i.push(te),r&&i.push(ee),s.map(n=>{const{idx:c}=n,a={item:t[c],refIndex:c};return i.length&&i.forEach(l=>{l(n,a)}),a})}class R{constructor(t,e={},r){this.options={...f,...e},this.options.useExtendedSearch,this._keyStore=new vt(this.options.keys),this.setCollection(t,r)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof X))throw new Error(Mt);this._myIndex=e||lt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){b(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const e=[];for(let r=0,i=this._docs.length;r<i;r+=1){const n=this._docs[r];t(n,r)&&(this.removeAt(r),r-=1,i-=1,e.push(n))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:n,sortFn:c,ignoreFieldNorm:a}=this.options;let l=I(t)?I(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return qt(l,{ignoreFieldNorm:a}),n&&l.sort(c),nt(e)&&e>-1&&(l=l.slice(0,e)),se(l,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const e=G(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:n,i:c,n:a})=>{if(!b(n))return;const{isMatch:l,score:h,indices:o}=e.searchIn(n);l&&i.push({item:n,idx:c,matches:[{score:h,value:n,norm:a,indices:o}]})}),i}_searchLogical(t){const e=dt(t,this.options),r=(a,l,h)=>{if(!a.children){const{keyId:u,searcher:d}=a,g=this._findMatches({key:this._keyStore.get(u),value:this._myIndex.getValueForItemAtKeyId(l,u),searcher:d});return g&&g.length?[{idx:h,item:l,matches:g}]:[]}const o=[];for(let u=0,d=a.children.length;u<d;u+=1){const g=a.children[u],p=r(g,l,h);if(p.length)o.push(...p);else if(a.operator===j.AND)return[]}return o},i=this._myIndex.records,n={},c=[];return i.forEach(({$:a,i:l})=>{if(b(a)){let h=r(e,a,l);h.length&&(n[l]||(n[l]={idx:l,item:a,matches:[]},c.push(n[l])),h.forEach(({matches:o})=>{n[l].matches.push(...o)}))}}),c}_searchObjectList(t){const e=G(t,this.options),{keys:r,records:i}=this._myIndex,n=[];return i.forEach(({$:c,i:a})=>{if(!b(c))return;let l=[];r.forEach((h,o)=>{l.push(...this._findMatches({key:h,value:c[o],searcher:e}))}),l.length&&n.push({idx:a,item:c,matches:l})}),n}_findMatches({key:t,value:e,searcher:r}){if(!b(e))return[];let i=[];if(w(e))e.forEach(({v:n,i:c,n:a})=>{if(!b(n))return;const{isMatch:l,score:h,indices:o}=r.searchIn(n);l&&i.push({score:h,key:t,value:n,idx:c,norm:a,indices:o})});else{const{v:n,n:c}=e,{isMatch:a,score:l,indices:h}=r.searchIn(n);a&&i.push({score:l,key:t,value:n,norm:c,indices:h})}return i}}R.version="7.0.0";R.createIndex=lt;R.parseIndex=$t;R.config=f;R.parseQuery=dt;Xt(Jt);function ie(){return this._listContainer?this._listContainer:(this._listContainer=this.querySelector('[slot="list"]'),this._listContainer)}function x(){if(this._list)return this._list;if(this._list=this.querySelector('[slot="list"] [data-list]'),this._list||(this._list=this.querySelector('[slot="list"]')),!this._list)throw new Error("List element not found");return this._list}function M(){if(this._input)return this._input;const s=this.querySelector('[slot="input"]');if(!s)throw new Error("Input element not found");return this._input=s,this._input}function W(){if(this._originalList)return this._originalList;const s=x.call(this);return this._originalList=s.cloneNode(!0),this._originalList}function re(){var r;const s=x.call(this),t=M.call(this);t.id=t.id.length!==0?t.id:`input-${crypto.randomUUID()}`,s.id=s.id.length!==0?s.id:`list-${crypto.randomUUID()}`,t.setAttribute("role","combobox"),t.setAttribute("aria-controls",s.id),t.setAttribute("aria-expanded","false"),t.setAttribute("aria-autocomplete","list"),t.setAttribute("autocomplete","off"),(r=this._listContainer)==null||r.setAttribute("popover","manual"),s.setAttribute("role","listbox"),s.setAttribute("aria-multiselectable","false"),s.tabIndex=-1;const e=s.children;for(let i=0;i<e.length;i++){const n=e[i];n.setAttribute("role","option"),n.setAttribute("aria-selected","false"),n.tabIndex=-1}}var m=(s=>(s.ArrowDown="ArrowDown",s.ArrowUp="ArrowUp",s.ArrowRight="ArrowRight",s.ArrowLeft="ArrowLeft",s.Home="Home",s.End="End",s.Backspace="Backspace",s.Delete="Delete",s.Escape="Escape",s.Enter="Enter",s.Alt="Alt",s))(m||{});function ne(s){const t=M.call(this),e=x.call(this),r=()=>t.getAttribute("aria-expanded")==="true";switch(s.key){case m.ArrowDown:r()?this.focusItem(e.children[0]):(this.toggleList(!0),this._isAltModifierPressed||this.focusItem(e.children[0])),s.preventDefault();break;case m.ArrowUp:r()&&this.focusItem(e.children[e.children.length-1]),s.preventDefault();break;case m.Escape:r()?this.toggleList(!1):t.value="",t.focus();break;case m.Enter:r()&&this.selectItem(e.children[0]);break;case m.Alt:this._isAltModifierPressed=!0;break}}function ce(s){const t=M.call(this),e=x.call(this),r=s.target;switch(s.key){case m.Enter:this.selectItem(r);break;case m.Escape:this.clearInput();break;case m.ArrowDown:{const i=r.nextElementSibling;i?this.focusItem(i):this.focusItem(e.children[0]),s.preventDefault();break}case m.ArrowUp:{if(this._isAltModifierPressed){t.focus(),this.toggleList(!1),s.preventDefault();break}const i=r.previousElementSibling;i?this.focusItem(i):this.focusItem(e.children[e.children.length-1]),s.preventDefault();break}case m.ArrowRight:t.focus();break;case m.ArrowLeft:t.focus();break;case m.Home:t.focus();break;case m.End:t.focus();break;case m.Backspace:t.focus();break;case m.Delete:t.focus();break;case m.Alt:this._isAltModifierPressed=!0;break;default:t.focus();break}}function rt(s){switch(s.key){case"Alt":this._isAltModifierPressed=!1;break}}function oe(){setTimeout(()=>{this.querySelector(":focus")||(this.forceValue(),this.toggleList(!1))},0)}class ae extends HTMLElement{constructor(){super(...arguments);A(this,"_input",null);A(this,"_list",null);A(this,"_listContainer",null);A(this,"_originalList",null);A(this,"_isAltModifierPressed",!1);A(this,"_forceValue",!1);A(this,"_lastValue");A(this,"_limit",1/0);A(this,"_fuse",null);A(this,"_fuseOptions",{includeScore:!0,keys:["dataset.display","dataset.value","innerText"]});A(this,"abortController",new AbortController)}static get observedAttributes(){return["data-value","data-fuse-options","data-listbox","data-limit"]}attributeChangedCallback(e,r,i){if(r!==i)switch(e){case"data-value":this.selectItemByValue(i,!1);break;case"data-fuse-options":{if(!this._fuse){this._fuseOptions=JSON.parse(i);return}const n=W.call(this);this._fuseOptions=JSON.parse(i),this._fuse=new R(Array.from(n.cloneNode(!0).children),this._fuseOptions),this.searchList();break}case"data-listbox":this._forceValue=!!i;break;case"data-limit":this._limit=parseInt(i);break}}connectedCallback(){const e=this.attachShadow({mode:"open"});e.innerHTML=`
        <slot name="input"></slot>
        <slot name="list"></slot>
        `,M.call(this),ie.call(this),x.call(this),re.call(this);const r=W.call(this);this._fuse=new R(Array.from(r.cloneNode(!0).children),this._fuseOptions),this.searchList(),this.addEventListeners(),this.forceValue()}disconnectedCallback(){this.abortController.abort()}toggleList(e=(r=>(r=this._input)==null?void 0:r.getAttribute("aria-expanded"))()!=="true"){var n,c;M.call(this).setAttribute("aria-expanded",`${e}`),e?(n=this._listContainer)==null||n.showPopover():((c=this._listContainer)==null||c.hidePopover(),this.unfocusAllItems())}focusItem(e){e&&(this.unfocusAllItems(),e.focus(),e.setAttribute("aria-selected","true"))}addEventListeners(){const e=M.call(this);this.addEventListener("focusout",oe.bind(this),{signal:this.abortController.signal}),this._input||M.call(this),e.addEventListener("input",this.searchList.bind(this,!0,!0),{signal:this.abortController.signal}),e.addEventListener("focus",this.toggleList.bind(this,!0),{signal:this.abortController.signal}),e.addEventListener("keydown",ne.bind(this),{signal:this.abortController.signal}),e.addEventListener("keyup",rt.bind(this),{signal:this.abortController.signal}),this.addEventListenersToListItems()}addEventListenersToListItems(){const r=x.call(this).children;for(let i=0;i<r.length;i++){const n=r[i];n.addEventListener("keydown",ce.bind(this),{signal:this.abortController.signal}),n.addEventListener("keyup",rt.bind(this),{signal:this.abortController.signal}),n.addEventListener("click",this.selectItem.bind(this,n,!0),{signal:this.abortController.signal})}}searchList(e=!0,r=!0){if(!this._fuse)throw new Error("Fuse object not found");const i=M.call(this),n=x.call(this),c=W.call(this);if(r&&(this.dataset.value="",this.sendChangeEvent()),i.value===""){n.innerHTML="",n.append(...Array.from(c.cloneNode(!0).children).slice(0,this._limit).sort((o,u)=>Number(u.dataset.weight)-Number(o.dataset.weight))),this.addEventListenersToListItems();return}let a=this._fuse.search(i.value).slice(0,this._limit);a=a.map(o=>({item:o.item,score:o.score??1,weight:Number(o.item.dataset.weight??1),refIndex:o.refIndex})).sort((o,u)=>o.score*(u.weight/o.weight)-u.score*(o.weight/u.weight)).map(o=>({item:o.item,score:o.score,weight:o.weight,refIndex:o.refIndex}));const l=a.map(o=>o.item);n.innerHTML="",n.append(...l.map(o=>o.cloneNode(!0)));const h=o=>{var u,d;if(o.nodeType===Node.TEXT_NODE&&((u=o.textContent)==null?void 0:u.trim())!==""&&((d=o.textContent)==null?void 0:d.trim())!==`
`){const g=o.textContent??"",p=document.createElement("template");p.innerHTML=this.highlightText(g,i.value),o.replaceWith(p.content)}else for(const g of o.childNodes)h(g)};for(const o of n.children)h(o);this.addEventListenersToListItems(),this.toggleList(e)}highlightText(e,r){const i=new RegExp(`[${r}]+`,"gmi");return e.replace(i,"<strong>$&</strong>")}unfocusAllItems(){const e=x.call(this);for(const r of e.querySelectorAll("[aria-selected]"))r.removeAttribute("aria-selected")}selectItem(e,r=!0){const i=M.call(this);e.dataset.display?i.value=e.dataset.display:e.children.length||Array.from(e.children).every(n=>n.nodeName==="STRONG")?i.value=e.innerText:e.dataset.value?i.value=e.dataset.value:i.value="",e.dataset.value&&(this.dataset.value=e.dataset.value),r&&i.focus(),this.toggleList(!1),this.searchList(!1,!1),this.sendChangeEvent()}selectItemByValue(e,r=!0){if(!e)return;const n=x.call(this).querySelector(`[data-value="${e}"]`);n&&this.selectItem(n,r)}clearInput(e=!0){const r=M.call(this);r.value="",e&&r.focus(),this.toggleList(!1)}forceValue(){var r;const e=x.call(this);if(this._forceValue&&((r=this._input)!=null&&r.value)&&!this.dataset.value){const i=e.children[0];i?this.selectItem(i,!1):(this.clearInput(!1),this.dataset.value="",this.sendChangeEvent())}}sendChangeEvent(){if(this.dataset.value===this._lastValue)return;const e=new Event("change");this.dispatchEvent(e),this._lastValue=this.dataset.value}}customElements.define("combobox-framework",ae);
