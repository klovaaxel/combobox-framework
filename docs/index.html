<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="An adaptable framework for building accessible comboboxes. Built as a web component">

        <!-- fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
        <!-- end -->
        
        <title>Combobox Framework</title>

        <!-- highlightjs -->
        <link rel="preconnect" href="https://cdnjs.cloudflare.com">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/xml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/css.min.js"></script>
        <!-- end -->
      <script type="module" crossorigin src="./assets/index-KxHK2qzb.js"></script>
      <link rel="stylesheet" crossorigin href="./assets/index-8PZl18EU.css">
    </head>
    <body>

        <article>
            <header>
                <h1>Combobox framework documentation</h1>

                <nav>
                    <a href="#installation">Installation</a>
                    <a href="#examples">Examples</a>
                    <a href="#styling">Styling</a>

                    <a href="https://github.com/klovaaxel/combobox-framework">GitHub</a>
                    <a href="https://www.npmjs.com/package/combobox-framework">NPM</a>
                    <a href="https://www.webcomponents.org/element/combobox-framework">WebComponents</a>
                </nav>

                <p>
                    An adaptable framework for building accessible comboboxes. Built as a web component, it can be used
                    in any framework or vanilla HTML/CSS/JS.
                </p>

                <section class="features">
                    <h2>Key features</h2>

                    <ul>
                        <li class="accessible">
                            Accessible! Built to follow the WAI-ARIA combobox design pattern. Built for keyboard
                            navigation, screen readers, and other assistive technologies.
                        </li>
                        <li class="styling">
                            Easy to style! Bind your own elements to the framework slots, and style them however you
                            want. Easy to integrate into any design system.
                        </li>
                    </ul>
                </section>

                <p>What follows are examples of how to use/implement the combobox-framework component</p>
            </header>

            <section>
                <h2 id="installation">Installation</h2>

                <section>
                    <h3>Link in from CDN</h3>
                    <pre><code>&lt;script type="module" src="https://unpkg.com/combobox-framework"&gt;&lt;/script&gt;</code></pre>
                </section>

                <section>
                    <h3>Install from npm</h3>
                    <p>Install the combobox-framework from npm</p>
                    <pre><code>npm install combobox-framework</code></pre>

                    <p>Import the combobox-framework into your project</p>
                    <pre><code>import 'combobox-framework';</code></pre>
                </section>
            </section>

            <section>
                <h2 id="examples">Examples</h2>

                <nav>
                    <a href="#simple-list">Simple list</a>
                    <a href="#simple-list-with-custom-display-data">Simple list with custom display data</a>
                    <a href="#list-with-nested-elements">List with nested elements</a>
                    <a href="#tabular-data">Tabular data</a>
                    <a href="#preselected-option">Preselected option</a>
                    <a href="#custom-fusefuzzy-search-options">Custom Fuse/Fuzzy search options</a>
                    <a href="#force-valuelistbox">Force value/Listbox</a>
                    <a href="#limit-suggested-options">Limit suggested options</a>
                    <a href="#weighted-item-search">Weighted item search</a>
                    <a href="#change-events">Change events</a>
                </nav>

                <section id="simple-list">
                    <h3>Simple list</h3>

                    <p>
                        To use the combobox-framework, you need to add a <code>input</code> element and a list of items.
                        The <code>input</code> element needs to be placed in a <code>slot="input"</code> attribute and
                        the list of items needs to be placed in a <code>slot="list"</code> attribute.
                    </p>

                    <p>
                        The <code>li</code> elements needs to have a <code>data-value</code> attribute. This is the
                        value that will be set on the <code>combobox-framework</code> element as the
                        <code>data-value</code> when a option is selected.
                    </p>

                    <div data-example>
                        <combobox-framework>
                            <input placeholder="Click me" type="text" slot="input" />
                            <ul slot="list">
                                <li data-value="1">Item 1</li>
                                <li data-value="2">Item 2</li>
                                <li data-value="3">Item 3</li>
                                <li data-value="4">Item 4</li>
                            </ul>
                        </combobox-framework>
                    </div>
                </section>

                <section id="simple-list-with-custom-display-data">
                    <h3>Simple list with custom display data</h3>

                    <p>
                        To show diffrent data in the input than in the list, you need to add the
                        <code>data-display</code> attribute to the <code>li</code> element. This is the value that will
                        be shown in the input when a option is selected.
                    </p>

                    <div data-example>
                        <combobox-framework>
                            <input placeholder="Click me" type="text" slot="input" />
                            <ul slot="list">
                                <li data-value="1" data-display="Item 1">1</li>
                                <li data-value="2" data-display="Item 2">2</li>
                                <li data-value="3" data-display="Item 3">3</li>
                                <li data-value="4" data-display="Item 4">4</li>
                            </ul>
                        </combobox-framework>
                    </div>
                </section>

                <section id="list-with-nested-elements">
                    <h3>List with nested elements</h3>

                    <p>
                        To use nested elements, you need to add the <code>data-display</code> attribute to the
                        <code>li</code> element. This is the value that will be shown in the input when a option is
                        selected.
                    </p>

                    <div data-example>
                        <combobox-framework>
                            <input placeholder="Click me" type="text" slot="input" />
                            <ul slot="list">
                                <li data-value="1" data-display="Item 1">
                                    <div>Item 1</div>
                                </li>
                                <li data-value="2" data-display="Item 2">
                                    <div>Item 2</div>
                                </li>
                                <li data-value="3" data-display="Item 3">
                                    <div>Item 3</div>
                                </li>
                                <li data-value="4" data-display="Item 4">
                                    <div>Item 4</div>
                                </li>
                            </ul>
                        </combobox-framework>
                    </div>
                </section>

                <section id="tabular-data">
                    <h3>Tabular data</h3>

                    <p>
                        To use tabular data, you need to add the <code>data-list</code> attribute to the
                        <code>tbody</code> element. This will tell the combobox-framework to use the
                        <code>tbody</code> element as the list of items and not the table itself.
                    </p>

                    <div data-example>
                        <combobox-framework>
                            <input placeholder="Click me" type="text" slot="input" />
                            <table slot="list">
                                <thead>
                                    <th>Name</th>
                                    <th>Number</th>
                                </thead>
                                <tbody data-list>
                                    <tr data-value="1" data-display="Item 1">
                                        <td>Item</td>
                                        <td>1</td>
                                    </tr>
                                    <tr data-value="2" data-display="Item 2">
                                        <td>Item</td>
                                        <td>2</td>
                                    </tr>
                                    <tr data-value="3" data-display="Item 3">
                                        <td>Item</td>
                                        <td>3</td>
                                    </tr>
                                    <tr data-value="4" data-display="Item 4">
                                        <td>Item</td>
                                        <td>4</td>
                                    </tr>
                                </tbody>
                            </table>
                        </combobox-framework>
                    </div>
                </section>

                <section id="preselected-option">
                    <h3>Preselected option</h3>

                    <p>
                        To preselect a option, you need to add the <code>data-value</code> attribute to the
                        <code>combobox-framework</code> element. This will tell the combobox-framework to select the
                        option with the matching <code>data-value</code> attribute.
                    </p>

                    <div data-example>
                        <combobox-framework data-value="1">
                            <input placeholder="Click me" type="text" slot="input" />
                            <ul slot="list">
                                <li data-value="1">Item 1</li>
                                <li data-value="2">Item 2</li>
                                <li data-value="3">Item 3</li>
                                <li data-value="4">Item 4</li>
                            </ul>
                        </combobox-framework>
                    </div>
                </section>

                <section id="custom-fusefuzzy-search-options">
                    <h3>Custom Fuse/Fuzzy search options</h3>

                    <p>
                        To use custom fuse/fuzzy search options, you need to add the
                        <code>data-fuse-options</code> attribute to the <code>combobox-framework</code> element, and
                        pass in a JSON string of the settings object. This will tell the combobox-framework to use the
                        custom options when searching for a option.
                    </p>

                    <p>
                        For what options are available, see the
                        <a href="https://www.fusejs.io/api/options.html">Fuse.js documentation</a>
                    </p>

                    <div data-example>
                        <combobox-framework data-fuse-options='{ "includeScore": true, "keys": ["dataset.value"]}'>
                            <input placeholder="Click me" type="text" slot="input" />
                            <ul slot="list">
                                <li data-value="1">Item 1</li>
                                <li data-value="2">Item 2</li>
                                <li data-value="3">Item 3</li>
                                <li data-value="4">Item 4</li>
                            </ul>
                        </combobox-framework>
                    </div>
                </section>

                <section id="force-valuelistbox">
                    <h3>Force value/Listbox</h3>

                    <p>
                        To force the combobox-framework to act as a searchable listbox, you need to add the
                        <code>data-listbox</code> attribute to the <code>combobox-framework</code> element. This will
                        tell the combobox-framework to act as a searchable listbox instead of a combobox. And only allow
                        the <code>value</code> to be one of the options in the list or <code>null</code>.
                    </p>

                    <div data-example>
                        <combobox-framework data-listbox="true">
                            <input placeholder="Click me" type="text" slot="input" />
                            <ul slot="list">
                                <li data-value="1">Item 1</li>
                                <li data-value="2">Item 2</li>
                                <li data-value="3">Item 3</li>
                                <li data-value="4">Item 4</li>
                            </ul>
                        </combobox-framework>
                    </div>
                </section>

                <section id="limit-suggested-options">
                    <h3>Limit suggested options</h3>

                    <p>
                        To limit the number of suggested options, you need to add the <code>data-limit</code> attribute
                        to the <code>combobox-framework</code> element. This will tell the combobox-framework to only
                        show the number of options specified in the <code>data-limit</code> attribute.
                    </p>

                    <div data-example>
                        <combobox-framework data-limit="2">
                            <input placeholder="Click me" type="text" slot="input" />
                            <ul slot="list">
                                <li data-value="1">Item 1</li>
                                <li data-value="2">Item 2</li>
                                <li data-value="3">Item 3</li>
                                <li data-value="4">Item 4</li>
                            </ul>
                        </combobox-framework>
                    </div>
                </section>

                <section>
                    <h3 id="weighted-item-search">Weighted item search</h3>

                    <p>
                        To use weighted item search, you need to add the <code>data-weight</code> attribute to the
                        <code>li</code> element. This is the value that will be used to sort the options when searching
                        for a option.
                    </p>

                    <p>
                      <em>NOTE: Fuse options must have <code>includeScore</code> set to <code>true</code> for weighted search to work.</em>
                      <code>includeScore</code> is true by default, if you have not set custom fuse options.
                    </p>

                    <p>
                        <em>NOTE: The <code>data-weight</code> attribute is a number, and the higher the number the higher the weight.</em>
                    </p>

                    <div data-example>
                        <combobox-framework>
                            <input placeholder="Click me" type="text" slot="input" />
                            <ul slot="list">
                                <li data-value="1" data-display="Item 1" data-weight="5">Item 1</li>
                                <li data-value="2" data-display="Item 2" data-weight="1">Item 2</li>
                                <li data-value="3" data-display="Item 3" data-weight="1">Item 3</li>
                                <li data-value="4" data-display="Item 4" data-weight="10">Item 4</li>
                            </ul>
                        </combobox-framework>
                    </div>
                </section>

                <section>
                    <h3 id="change-events">Change events</h3>

                    <p>
                        To add a change event, you need to add the <code>onchange</code> attribute to the
                        <code>combobox-framework</code> element. This will tell the combobox-framework to run the
                        function when the value of the combobox changes.
                    </p>

                    <div data-example>
                        <combobox-framework onchange="console.log('Changed')">
                            <input placeholder="Click me" type="text" slot="input" />
                            <ul slot="list">
                                <li data-value="1">Item 1</li>
                                <li data-value="2">Item 2</li>
                                <li data-value="3">Item 3</li>
                                <li data-value="4">Item 4</li>
                            </ul>
                        </combobox-framework>
                    </div>
                </section>

            </section>

            <section>
                <h2 id="styling">Styling</h2>

                <p>This is the styling thats being used on this demo page. Hopefully it gives a good starting point</p>

                <div data-example>
                    <style>
                        combobox-framework [slot="list"] {
                            color: var(--background-color);
                            background-color: var(--text-color);
                            position: absolute;
                            top: anchor(bottom);
                            left: anchor(left);
                            right: anchor(right);
                            list-style: none;
                            margin: 0;
                            padding: 0;
                            border: 1px solid black;
                            border-radius: 0 0 0.2rem 0.2rem;
                        }

                        combobox-framework [slot="list"] > * {
                            padding: 0.2rem;
                            cursor: pointer;
                        }

                        combobox-framework [slot="list"] li:hover,
                        combobox-framework [slot="list"] tr:hover td {
                            background-color: var(--primary-color);
                        }

                        combobox-framework input[aria-expanded="false"] + [slot="list"],
                        combobox-framework input:not([aria-expanded]) + [slot="list"] {
                            display: none;
                        }
                    </style>
                </div>
            </section>
        </article>

        <script>
            const examples = document.querySelectorAll("[data-example]");
            for (const example of examples) {
                let exampleContent = example.innerHTML.trimEnd();

                // Remove leading and ending newlines
                if(exampleContent.startsWith('\n')) exampleContent = exampleContent.slice(1);
                if(exampleContent.endsWith('\n')) exampleContent = exampleContent.slice(exampleContent.length, 1);
                // end - Remove leading and ending newlines

                // Replace < and > with &lt; and &gt;
                exampleContent = exampleContent.replace(/</g, "&lt;").replace(/>/g, "&gt;");
                // end - Replace < and > with &lt; and &gt;

                // Remove leading spaces
                leadingSpaces = exampleContent.match(/^\s+/);
                if(leadingSpaces) {
                    exampleContent = exampleContent.replace(new RegExp(`^${leadingSpaces[0]}`, "gm"), "");
                }
                // end - Remove leading spaces
                
                // Add pre and code tags
                pre = document.createElement("pre");
                pre.innerHTML = `<code>${exampleContent}</code>`;
                example.appendChild(pre);
                // end - Add pre and code tags
            }
        </script>
        <script>hljs.highlightAll();</script>
    </body>
</html>
